function addCommas(nStr){for(var x=(nStr+="").split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",rgx=/(\d+)(\d{3})/;rgx.test(x1);)x1=x1.replace(rgx,"$1"+WPTE_Price_Separator+"$2");return x1+x2}jQuery(document).ready(function($){wte.single_showtabs||($(".tab-inner-wrapper .tab-anchor-wrapper:first-child").addClass("nav-tab-active"),$(".nb-tab-trigger").click(function(){$(".nb-tab-trigger").removeClass("nav-tab-active"),$(".nb-tab-trigger").parent().parent().removeClass("nav-tab-active"),$(this).addClass("nav-tab-active"),$(this).parent().parent().addClass("nav-tab-active");var configuration=$(this).data("configuration");$(".nb-configurations").hide(),$(".nb-"+configuration+"-configurations").show()}),$(".tab_content").hide(),$(".tab_content:first").show(),$("ul.tabs li").click(function(){$(".tab_content").hide();var activeTab=$(this).attr("rel");$("#"+activeTab).fadeIn(),$("ul.tabs li").removeClass("active"),$(this).addClass("active"),$(".tab_drawer_heading").removeClass("d_active"),$(".tab_drawer_heading[rel^='"+activeTab+"']").addClass("d_active")}),$(".tab_drawer_heading").click(function(){$(".tab_content").hide();var d_activeTab=$(this).attr("rel");$("#"+d_activeTab).fadeIn(),$(".tab_drawer_heading").removeClass("d_active"),$(this).addClass("d_active"),$("ul.tabs li").removeClass("active"),$("ul.tabs li[rel^='"+d_activeTab+"']").addClass("active")}),$("ul.tabs li").last().addClass("tab_last")),$(function(){var $radios=$(".payment-check");!1===$radios.is(":checked")&&$radios.is(":visible")&&($radios.filter("[value=paypal]").prop("checked",!0),$(".stripe-button").removeClass("active"),$(".stripe-button-el").hide(),$("#wp-travel-engine-order-form").attr("action",WP_OBJ.link.paypal_link))}),$("body").on("click",".paypal-form",function(e){var url=$(".stripe_checkout_app").attr("src");$(".stripe_checkout_app").attr("src",""),$(".stripe_checkout_app").attr("src",url),$("#wp-travel-engine-order-form").submit()}),$("body").on("click",".payment-check",function(e){$(this).is(":checked")&&("stripe"==$(this).attr("value")&&($("#wp-travel-engine-order-form").attr("action",WP_OBJ.link.form_link),$(".paypal-form").hide(),$(".stripe-form").fadeIn("slow"),$(".stripe-button").addClass("active"),$(".stripe-button-el").show()),"paypal"==$(this).attr("value")&&($("#wp-travel-engine-order-form").attr("action",WP_OBJ.link.paypal_link),$(".stripe-button").removeClass("active"),$(".stripe-button-el").hide(),$(".paypal-form").fadeIn("slow")))}),$("body").on("click",".check-availability",function(e){e.preventDefault(),$(".date-time-wrapper").fadeIn("slow")}),$("body").on("click",".check-availability",function(e){e.preventDefault(),$(".wp-travel-engine-price-datetime").focus()}),$("body").on("click",".wp-travel-engine-cart",function(e){e.preventDefault(),trip_id=$(this).attr("data-id"),nonce=$(this).attr("data-nonce"),jQuery.ajax({type:"post",dataType:"json",url:WTEAjaxData.ajaxurl,data:{action:"wp_add_trip_cart",trip_id:trip_id,nonce:nonce},success:function(response){"already"===response.type?($(".wp-cart-message-"+trip_id).css("color","orange"),$(".wp-cart-message-"+trip_id).html(response.message).fadeIn("slow").delay(3e3).fadeOut("slow")):"success"===response.type?($(".wp-cart-message-"+trip_id).css("color","green"),$(".wp-cart-message-"+trip_id).html(response.message).fadeIn("slow").delay(3e3).fadeOut("slow")):($(".wp-cart-message-"+trip_id).css("color","red"),$(".wp-cart-message-"+trip_id).html(response.message).fadeIn("slow").delay(3e3).fadeOut("slow")),$(".wte-update-cart-button-wrapper:visible").length<1&&$(".wte-update-cart-button-wrapper").css("display","block")}})}),$("#price-loading").fadeOut(2e3),$(".price-holder").fadeIn(2e3),$("body").on("change",".travelers-number",function(e){$val=$(this).val(),$new_val=$(this).parent().parent().siblings(".trip-price-holder").children(".cart-price-holder").text().replace(/,/g,""),$total=$val*$new_val,$total=addCommas($total),$(this).parent().parent().siblings(".cart-trip-total-price").children(".cart-trip-total-price-holder").text($total),$sum=0,$(".cart-trip-total-price-holder").each(function(index){$tcost=$(this).text().replace(/,/g,""),$sum=parseInt($sum)+parseInt($tcost)}),$sum=addCommas($sum),$(".total-trip-price").text($sum),$value=0,$val1=parseInt($("span.travelers-number").text()),$("input.travelers-number").each(function(index){""!==$(this).val()&&($value=parseInt($value)+parseInt($(this).val()))}),$travelers=parseInt($value)+parseInt($val1),$(".total-trip-travelers").text($travelers)}),$("#wp-travel-engine-cart-form").on("submit",function(e){e.preventDefault();var data2=$("#wp-travel-engine-cart-form").serialize(),nonce=$("#update_cart_action_nonce").val();jQuery.ajax({type:"post",url:WTEAjaxData.ajaxurl,data:{action:"wte_update_cart",nonce:nonce,data2:data2},success:function(){$(".wte-update-cart-msg").text(WPMSG_OBJ.ajax.success),$(".wte-update-cart-msg").css("color","green").fadeIn("slow").delay(3e3).fadeOut("slow")}})}),$("#wte_payment_options").on("change",function(e){var val=$("#wte_payment_options :selected").val();e.preventDefault(),""!=val&&$("#price-loader").fadeIn("slow").delay("3000").fadeOut("3000")}),$(".accordion-tabs-toggle").next().hasClass("show"),$(".accordion-tabs-toggle").next().removeClass("show"),$(".accordion-tabs-toggle").next().slideUp(350),$(document).on("click",".faq-row .accordion-tabs-toggle",function(){var $this=$(this);$this.siblings(".faq-content").toggleClass("show"),$this.toggleClass("active"),$this.siblings(".faq-content").slideToggle(350),$this.find(".dashicons.dashicons-arrow-down.custom-toggle-tabs").toggleClass("open")}),$(document).on("click",".expand-all-faq",function(e){e.preventDefault(),$(this).children("svg").hasClass("fa-toggle-off")&&$(this).children("svg").toggleClass("fa-toggle-on"),$(this).children("svg").hasClass("fa-toggle-on")&&$(this).children("svg").toggleClass("fa-toggle-off"),$(".faq-row .accordion-tabs-toggle").toggleClass("active"),$(".faq-row").children(".faq-content").toggleClass("show"),$(".faq-row").children(".faq-content").slideToggle(350),$(".faq-row").find(".dashicons.dashicons-arrow-down.custom-toggle-tabs").toggleClass("open")}),$('form[name="wte_enquiry_contact_form"]').submit(function(e){if(e.preventDefault(),$("#wte_enquiry_contact_form").parsley().isValid()){$("#enquiry_submit_button").prop("disabled",!0);var redirect=jQuery("#redirect-url").val(),EnquiryDetails=new FormData(this);$.ajax({dataType:"json",type:"post",processData:!1,contentType:!1,url:WTEAjaxData.ajaxurl,data:EnquiryDetails,success:function(response){"success"===response.type?jQuery(".success-msg").html(response.message).fadeIn("slow").delay("3000").fadeOut("3000",function(){window.location.href=redirect}):"error"===response.type?(jQuery("#enquiry_email").css("border","1px solid red"),jQuery(".failed-msg").html(response.message).fadeIn("slow").delay("3000").fadeOut("slow",function(){jQuery("#enquiry_email").css("border","1px solid #d1d1d1"),jQuery("#enquiry_submit_button").prop("disabled",!1)})):jQuery(".failed-msg").html(response.message).fadeIn("slow").delay("3000").fadeOut("slow",function(){$("#enquiry_submit_button").prop("disabled",!1)})}})}}),$("#wp-travel-engine-order-form").submit(function(e){if("Himalayan-Bank"!=$("#wte_payment_options :selected").val()){var form_obj=$(this),other_amt=form_obj.find("input[name=amount]").val();!isNaN(other_amt)&&other_amt.length>0&&(options_val=other_amt,$("<input>").attr({type:"hidden",id:"amount",name:"amount",value:options_val}).appendTo(form_obj))}}),$("#wte_payment_options").on("change",function(e){var val=$("#wte_payment_options :selected").val();if(e.preventDefault(),""==val||"Test Payment"==val)return $("#wte-checkout-payment-fields").html(""),$("#wp-travel-engine-order-form").attr("action",Url.normalurl),$(".wp-travel-engine-billing-details-wrapper").html(response.data),$(".stripe-button:visible").remove(),$(".stripe-button-el").remove(),$(".wp-travel-engine-submit").show(),void $(".wte-authorize-net-wrap").remove();"PayPal"==val&&jQuery.ajax({type:"post",url:WTEAjaxData.ajaxurl,data:{action:"wte_payment_gateway",val:val},success:function(response){"PayPal"==val&&($("#wp-travel-engine-order-form").attr("action",Url.paypalurl),$(".wp-travel-engine-billing-details-wrapper").html(response.data),$("#wte-checkout-payment-fields").html(response.data),$(".stripe-button:visible").remove(),$(".stripe-button-el").remove(),$(".wp-travel-engine-submit").show(),$(".wte-authorize-net-wrap").remove()),"Test Payment"==val&&($("#wp-travel-engine-order-form").attr("action",Url.normalurl),$(".wp-travel-engine-billing-details-wrapper").html(response.data),$(".stripe-button:visible").remove(),$(".stripe-button-el").remove(),$(".wp-travel-engine-submit").show(),$(".wte-authorize-net-wrap").remove())}})}),$("body").on("keyup","#cost_includes",function(e){$("#include-result").val($("#cost_includes").val()),$("#include-result").val("<li>"+$("#include-result").val().replace(/\n/g,"</li><li>")+"</li>")}),$("body").on("keyup","#cost_excludes",function(e){$("#exclude-result").val($("#cost_excludes").val()),$("#exclude-result").val("<li>"+$("#exclude-result").val().replace(/\n/g,"</li><li>")+"</li>")}),$("body").on("keyup",".itinerary-content",function(e){$(this).siblings(".itinerary-content-inner").val($(this).val()),$(this).siblings(".itinerary-content-inner").val("<p>"+$(this).val().replace(/\n/g,"</p><p>")+"</p>")}),$(document).on("click",".expand-all-itinerary",function(e){e.preventDefault(),$(this).children("i").toggleClass("fa-toggle-on"),$(".itinerary-row").children(".itinerary-content").toggleClass("show"),$(".itinerary-row").children(".itinerary-content").slideToggle(350),$(".itinerary-row").find(".dashicons.dashicons-arrow-down.custom-toggle-tabs").toggleClass("rotator")}),$(document).on("click",".less-no",function(e){$val=$(this).next("input").val(),0!=$val&&($val=parseInt($val)-1,$(this).next("input").val($val))}),$(document).on("click",".more-no",function(e){if($val=$(this).prev("input").val(),""==$val)return $val=1,void $(this).prev("input").val($val);$val=parseInt($val)+1,$(this).prev("input").val($val)}),$("#wp-travel-engine-new-checkout-form").parsley(),$("input[name=wp_travel_engine_payment_mode]").length>0&&$(document).on("change","input[name=wp_travel_engine_payment_mode]",function(){var payment_mode=$("input[name=wp_travel_engine_payment_mode]:checked").val(),partial_payment_table=$(".wpte-bf-book-summary .wpte-bf-extra-info-table"),amount="partial"==payment_mode?wte.payments.total_partial:wte.payments.total;amount=wteGetFormatedPriceWithCurrencyCodeSymbol(amount);"partial"==payment_mode?partial_payment_table.show():partial_payment_table.hide(),$(".wpte-bf-book-summary .wpte-bf-total-price .wpte-price").html(amount)}),$("#wte-send-enquiry-message").click(function(e){e.preventDefault(),document.getElementById("wte_enquiry_contact_form").scrollIntoView({behavior:"smooth",block:"center"})}),$("#wte_enquiry_contact_form").parsley(),$(".wte-ordering").on("change","select.orderby",function(){$(this).closest("form").submit()}),$(window).on("load",function(){$(window).width()<1025?$(".single-trip .wte_enquiry_contact_form-wrap").insertAfter(".single-trip .widget-area .wpte-bf-outer"):$(".single-trip .widget-area .wte_enquiry_contact_form-wrap").insertAfter(".single-trip .site-main")});var wteSelec2Selectors=document.querySelectorAll(".wpte-enhanced-select");wteSelec2Selectors&&wteSelec2Selectors.forEach(function(el){$(el).select2()})}),function(){var toggleContainers=document.querySelectorAll(".wpte-bf-toggle-wrap");function hideTogggleContainer(element,cb){return function eventHandler(event){var contentEl=element.querySelector(".wpte-bf-toggle-content");element.className.indexOf("wpte-bf-active")>-1?function(element,cb){var opacity=1;!function decrease(){if((opacity-=.05)<=0)return element.style.removeProperty("opacity"),element.style.display="none",void cb();element.style.opacity=opacity,requestAnimationFrame(decrease)}()}(contentEl,function(){document.removeEventListener("click",eventHandler),element.classList.remove("wpte-bf-active"),cb()}):(element.className.indexOf("wpte-bf-active")<0?element.classList.add("wpte-bf-active"):element.classList.remove("wpte-bf-active"),cb())}}toggleContainers&&toggleContainers.forEach(function(tc){var toggler=tc.querySelector(".wpte-bf-toggle-title"),closeBtn=(tc.querySelector(".wpte-bf-toggle-content"),tc.querySelector(".wpte-bf-toggle-close"));closeBtn&&closeBtn.addEventListener("click",function(event){event.preventDefault(),hideTogggleContainer(tc)}),toggler&&toggler.addEventListener("click",function(event){document.addEventListener("click",hideTogggleContainer(tc,function(){var span=toggler.querySelector(".wtebf-toggle-title"),activeSpan=toggler.querySelector(".wtebf-toggle-title-active");activeSpan&&(activeSpan.style.display=tc.className.indexOf("wpte-bf-active")>-1?"block":"none"),span&&(span.style.display=tc.className.indexOf("wpte-bf-active")<0?"block":"none")}))})})}();